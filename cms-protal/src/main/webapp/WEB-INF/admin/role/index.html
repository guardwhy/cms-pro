<#import "/layout/backend/main.ftl" as main>
<@main.layout>
    <table id="dataGrid" class="layui-table" lay-filter="dataGrid"></table>
</@main.layout>

<script>
    //layui的表格固定配置
    let dataGridOption = {
        id: "dataGrid",
        elem: '#dataGrid',
        method: 'post',
        page: true,
        url:'',
        limit: 10,
        request: {
            pageName: 'pageCurrent', //页码的参数名称，默认：page
            limitName: 'pageSize' //每页数据量的参数名，默认：limit
        },
        response: {
            statusName: 'restCode', //数据状态的字段名称，默认：code
            statusCode: 200, //成功的状态码，默认：0
            msgName: 'restCode', //状态信息的字段名称，默认：msg
            countName: 'pageCount', //数据总数的字段名称，默认：count
            rootName: 'data'
        },
        parseData: function (res) {
            // 下面字符串是对上面字符串的解释
            return {
                "restCode": res.restCode,
                "pageCount": res.data ? res.data.pageCount : undefined,
                "data": res.data ? res.data.content : undefined
            }
        }
    };

    layui.use('table', function(){
        var table = layui.table;

        let obj = {
            elem: '#dataGrid'
            ,url:'${adminPath}/role/page.do'
            ,cellMinWidth: 80 //全局定义常规单元格的最小宽度，layui 2.2.1 新增
            ,cols: [[
                {field:'id', width:80, title: 'ID', sort: true}
                ,{field:'username', width:80, title: '用户名'}
                ,{field:'sex', width:80, title: '性别', sort: true}
                ,{field:'city', width:80, title: '城市'}
                ,{field:'sign', title: '签名', width: '30%', minWidth: 100} //minWidth：局部定义当前单元格的最小宽度，layui 2.2.1 新增
                ,{field:'experience', title: '积分', sort: true}
                ,{field:'score', title: '评分', sort: true}
                ,{field:'classify', title: '职业'}
                ,{field:'wealth', width:137, title: '财富', sort: true}
                ,{templet: '#rightTemplate', align: 'center', title: '操作'}
            ]]
            ,toolbar:"#toolbar"
        };

        table.render($.extend({},dataGridOption,obj));
    });


</script>
<script type="text/html" id="rightTemplate">
    <a class="layui-btn layui-bg-blue layui-btn-xs"  href="${adminPath}/role/add.do?parentId={{d.id}}">添加</a>
    <a class="layui-btn layui-btn-primary layui-btn-xs" href="${adminPath}/role/edit.do?id={{d.id}}">修改</a>
    <a class="layui-btn layui-btn-danger layui-btn-xs" lay-event="del">删除</a>
</script>
<script type="text/html" id="toolbar">
    <a class="layui-btn layui-btn-sm layui-bg-blue" href="${adminPath}/role/add.do"><i class="layui-icon layui-icon-add-1"></i>添加</a>
    <a class="layui-btn layui-btn-sm" onclick="javascript:window.location.reload()"><i class="layui-icon layui-icon-refresh-3"></i>刷新</a>
</script>